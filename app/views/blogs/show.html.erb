<div class="container">
	<div class="flash">
		<%= flash[:notice] %>
	</div>
	<h1>ブログ詳細</h1>
	<div class="row">
		<div class="col-2 col-xs-offset-3">
			<%= attachment_image_tag @blog, :image, format: 'jpeg', size: "150x150" %>
		</div>
		<div class="col-5 col-sm-offset-2">
			<p> [タイトル] <%= @blog.title %></p>
			<p> [本文] <%= @blog.body.html_safe %></p>
			<p> カテゴリー: <%= @blog.category.name %></p>
			<p> 投稿者: <%= link_to(@blog.user) do %>
				<%= attachment_image_tag(@blog.user, :image, format: 'jpeg', size: "50x50", fallback: "no-image-icon.jpg") %>
				<%= @blog.user.name %></p>
				<% end %>
		<% if @blog.user == current_user %>
          <p><%= link_to 'Edit', edit_blog_path(@blog), class: "btn-sm btn-success edit_blog_#{@blog.id}" %></p>
          <p><%= link_to 'Destroy', @blog, method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn-sm btn-danger destroy_blog_#{@blog.id}"%></p>
        <% end %>
		</div>
	</div>
	<table class="show-tb">
		<h3>コメント</h3>
      <% @blog_comments.each do |blog_comment| %> <!-- コメント一覧 -->
        <tr>
          <td>
            <%= link_to user_path(blog_comment.user), class: "user_#{blog_comment.user.id}" do %>
              <%= attachment_image_tag blog_comment.user, :image, format: 'jpeg', size: "50x50", fallback: "no_image.jpg", size: "50x50" %>
              <%= blog_comment.user.name %>
            <% end %>
          </td>
          <td><%= blog_comment.comment %></td>
          <% unless current_user != blog_comment.user %>
            <td><%= link_to 'Destroy', blog_blog_comments_path(blog_comment.id), class: 'btn-sm btn-danger', method: :delete, data: { confirm: '本当に消しますか？' } %></td>
          <% end %>
        </tr>
      <% end %>
    </table>
    <div class="col-4 col-offset-8">
      <%= form_for [@blog, @blog_comment] do |f| %>
        <%= f.text_field :comment %>
        <%= f.submit '送信' %>
      <% end %>
    </div>
</div>

